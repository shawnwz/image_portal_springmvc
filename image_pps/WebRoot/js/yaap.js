function Yaap(e){this.args=e,this.autoInit=!0,this.enableCache=!0,this.funcs={},this.iPage=1,this.iCurPagerKey=0,this.aContent=[];for(property in e)this[property]=e[property];this.init()}Yaap.prototype={constructor:Yaap,clearContentArea:function(){var e=document.getElementById(this.sContainerId);e.innerHTML=""},clearPagerArea:function(){var e=document.getElementById(this.sPagerId);e.innerHTML=""},getContent:function(e){isNaN(e)||e==0||e>this.iPageCount?this.showEmpty():(this.clearContentArea(),this.enableCache===!0&&this.aContent[e]!=undefined?this.getContentFromCache(e):this.getNewContent(e),this.iPage=e,this.sPagerPrevTxt&&this.rebuildPagerPrev(),this.sPagerNextTxt&&this.rebuildPagerNext(),this.pagerRebuild())},getNewContent:function(e){var t=new this.AjaxRequest,n=this.makePostData?this.makePostData(e):"";this.iPage=e,t.Post(this.makeURL(e),n,this.getNewContentCallBack,{_this:this})},getNewContentCallBack:function(e,t){var n=e,r=t._this;r.aContent[r.iPage]=n,r.showContent(n)},getContentFromCache:function(e){this.iPage=e,this.clearContentArea(),this.showContent(this.aContent[e])},init:function(){this.isPagerNeeded()&&(this.initArgs(),this.initCommonFuncs(),this.reCalcPagerLimit(),this.initPager(),this.autoInit===!0&&this.getContent(this.iPage),this.getLatestTotalCnt&&this.getLatestTotalCnt())},initArgs:function(){this.sActiveClassName==undefined&&(this.sActiveClassName=""),this.sInactiveClassName==undefined&&(this.sInactiveClassName="")},initCommonFuncs:function(){var e=this;e.funcs.getElementsByClassName=function(e,t,n){var r=e&&document.getElementById(e)||document,t=t||"*",n=n.split(" "),i=n.length;for(var s=0,o=i;s<o;s++)n[s]=new RegExp("(^|\\s)"+n[s].replace(/\-/g,"\\-")+"(\\s|$)");var u=r.getElementsByTagName(t),a=[];for(var s=0,o=u.length,f=0;s<o;s++){var l=u[s];while(n[f++].test(l.className))if(f===i){a[a.length]=l;break}f=0}return a},e.XmlHttpObj=function(){var e=null;if(window.XMLHttpRequest)e=new XMLHttpRequest,e.overrideMimeType&&e.overrideMimeType("text/xml");else if(window.ActiveXObject)try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}return e},e.ReadyStateChange=function(e,t,n){return function(){e.xho.readyState==4&&e.xho.status==200&&t(e.xho.responseText,n)}},e.AjaxRequest=function(){this.xho=e.XmlHttpObj();if(this.xho==null)return},e.AjaxRequest.prototype.Post=function(t,n,r,i){this.xho.open("POST",t,!1),this.xho.onreadystatechange=e.ReadyStateChange(this,r,i),this.xho.setRequestHeader("CONTENT-TYPE","application/x-www-form-urlencoded"),this.xho.send(n)},e.AjaxRequest.prototype.Get=function(t,n,r){this.xho.open("GET",t,!0),this.xho.onreadystatechange=e.ReadyStateChange(this,n,r),this.xho.setRequestHeader("CONTENT-TYPE","application/x-www-form-urlencoded"),this.xho.send(null)}},initPager:function(){this.setPagerAnchorWrapper(),this.initPagerAnchors()},initPagerAnchors:function(){var e=document.getElementById(this.sPagerId),t="";this.sPagerPrevTxt&&(t+=" "+this.sPagerWrapperPrefix+'<a href="javascript:" id="'+this.sPagerId+'_anchor_prev" >'+this.sPagerPrevTxt+"</a>"+this.sPagerWrapperSuffix);for(var n=0,r=this.iActualPagerCount;n<r;n++)t+=" "+this.sPagerWrapperPrefix+'<a href="javascript:" class="'+this.sPagerId+'_anchor_common">'+(n+1)+"</a>"+this.sPagerWrapperSuffix;this.sPagerNextTxt&&(t+=" "+this.sPagerWrapperPrefix+'<a href="javascript:" id="'+this.sPagerId+'_anchor_next" >'+this.sPagerNextTxt+"</a>"+this.sPagerWrapperSuffix),e.innerHTML=t,this.sPagerPrevTxt&&this.rebuildPagerPrev(),this.sPagerNextTxt&&this.rebuildPagerNext(),this.initPagerCommon()},initPagerCommon:function(){var e=this;this.aCommonAnchors=this.funcs.getElementsByClassName(this.sPagerId,"a",this.sPagerId+"_anchor_common"),this.setAllAsInactive(this.aCommonAnchors);for(var t=0,n=this.aCommonAnchors.length;t<n;t++){var r=this.aCommonAnchors[t];t+1==this.iPage&&this.setAsActive(r),r.onclick=function(){var t=parseInt(this.innerHTML);return e.getContent(t),!1}}},isPagerNeeded:function(){var e=!1,t=document.getElementById(this.sContainerId);return t!==null&&this.iTotal>this.iPerPage&&(e=!0),e},pagerRebuild:function(){var e=this.iPage,t=1,n=this.iActualPagerCount,r=0,s=0;if(this.iPageCount>this.iPagerLimit){var o=this.iPageCount,u=this.iPagerLimit,a=Math.floor(u/2),f=u%2!==0;if(e>a){var l=o-a;f&&l--,e>l?(t=o-u+1,n=o):(t=e-a+1,n=e+a,f&&n++)}}for(i=t;i<=n;i++)this.aCommonAnchors[r].innerHTML=i,i===e&&(this.iCurPagerKey=r),r++;this.setAllAsInactive(this.aCommonAnchors),this.setAsActive(this.aCommonAnchors[this.iCurPagerKey])},reCalcPagerLimit:function(){this.iPageCount=Math.ceil(this.iTotal/this.iPerPage),this.iActualPagerCount=this.iPageCount>this.iPagerLimit?this.iPagerLimit:this.iPageCount},rebuildPagerPrev:function(){var e=this,t=document.getElementById(this.sPagerId+"_anchor_prev");this.iPage>1?t.onclick=function(){return e.getContent(e.iPage-1),!1}:t.onclick=function(){return!1}},rebuildPagerNext:function(){var e=this,t=document.getElementById(this.sPagerId+"_anchor_next");this.iPage<this.iPageCount?t.onclick=function(){return e.getContent(e.iPage+1),!1}:t.onclick=function(){return!1}},setAsActive:function(e){var t=new RegExp(this.sInactiveClassName,"g");this.sInactiveClassName&&e.className.indexOf(this.sInactiveClassName)!=-1?e.className=e.className.replace(t,this.sActiveClassName):e.className=e.className+" "+this.sActiveClassName},setAsInactive:function(e){var t=new RegExp(this.sActiveClassName,"g");e.className.indexOf(this.sActiveClassName)!=-1?e.className=e.className.replace(t,this.sInactiveClassName):e.className=e.className+" "+this.sInactiveClassName},setAllAsInactive:function(e){for(var t=0,n=e.length;t<n;t++)this.setAsInactive(e[t])},parseContent:function(e){},setPagerAnchorWrapper:function(){var e=this.sPagerWrapperTag;this.sPagerWrapperPrefix=e?"<"+e+">":"",this.sPagerWrapperSuffix=e?"</"+e+">":""},showEmpty:function(){},showContent:function(e){var t=document.getElementById(this.sContainerId);t.innerHTML=this.parseContent(e),this.shownCallback&&typeof this.shownCallback=="function"&&this.shownCallback()}}